<div data-ng-include data-src="'/static/app/templates/breadcrumbs.html'"></div>

<div class="modal-header">
    <h3 class="modal-title">
      <button class="btn btn-sm btn-link" ng-click="titleForm.$show()" ng-hide="titleForm.$visible">
        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
      </button>
      <span editable-text="ic.CourseCache.current_image.title" e-form="titleForm" onbeforesave="ic.save()">
        {{ ic.CourseCache.current_image.title || "Click to add a Title" }}
      </span>
    </h3>
    <pp>
      <button class="btn btn-sm btn-link" ng-click="descForm.$show()" ng-hide="descForm.$visible">
        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
      </button>
      <span editable-text="ic.CourseCache.current_image.description" e-form="descForm" onbeforesave="ic.save()">
        {{ ic.CourseCache.current_image.description || "Click to add a Description" }}
      </span>
    </pp>
    <ul class="list-unstyled">
      <li ng-repeat="meta in ic.image.metadata track by $index" ng-init="fname = 'metadataForm' + meta.id">
        <form class="form-inline" editable-form name="fname" ng-submit="" onaftersave="ic.saveMetadata(meta.label, meta.value, $index)">
          <button type="button" class="btn btn-sm btn-link" ng-click="fname.$show()" ng-show="!fname.$visible">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
          </button>
          <strong editable-text="meta.label">{{ meta.label || "No Label" }}</strong>:
          <span editable-text="meta.value">{{ meta.value || "No Value" }}</span>
          <span ng-show="fname.$visible">
            <button type="submit" class="btn btn-primary" ng-disabled="fname.$waiting">
              <span class="glyphicon glyphicon-ok"></span>
            </button>
            <button type="button" class="btn btn-default" ng-disabled="fname.$waiting" ng-click="fname.$cancel()">
              <span class="glyphicon glyphicon-remove"></span>
            </button>
            <button type="button" class="btn btn-danger" ng-disabled="fname.$waiting" ng-click="ic.deleteMetadata($index, fname)">
              <span class="glyphicon glyphicon-trash"></span>
            </button>
          </span>
        </form>
      </li>
      <li ng-hide="ic.editNewMetadata">
        <button class="btn btn-link" ng-click="ic.showNewMetadata()">New Metadata</button>
      </li>
      <li ng-show="ic.editNewMetadata">
        <form ng-submit="ic.saveMetadata()">
          <input type="text" ng-model="ic.newLabel" focus="ic.editNewMetadata"/>:
          <input type="text" ng-model="ic.newValue"/>
          <button type="submit" class="btn btn-primary">
            <span class="glyphicon glyphicon-ok"></span>
          </button>
          <button type="button" class="btn btn-default" ng-click="ic.hideNewMetadata()">
            <span class="glyphicon glyphicon-remove"></span>
          </button>
        </form>
      </li>
    </ul>
    <div>
      <button class="btn btn-danger pull-right" type="button" ng-click="ic.imageBehavior.deleteImageModal(ic.CourseCache.current_image.id)">Delete</button>
    </div>
</div>
<div class="modal-body">
  <div class="text-center">
    {{ ic.index + 1 }} / {{ ic.CourseCache.images.length }}
  </div>
  <div class="text-center">
    <button type="button" class="btn btn-default" aria-label="Left Align" ng-click="ic.prev()">
      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
    </button>
    <button type="button" class="btn btn-default" aria-label="Left Align" ng-click="ic.next()">
      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
    </button>
  </div>
  <img style="display: block; margin-left: auto; margin-right: auto; max-height: 400px;" ng-src="{{ ic.CourseCache.current_image.image_url }}"/>
</div>
<div class="modal-footer">
</div>
